define(["backbone","raphael","traer"],function(i,t,n){var e=i.Model.extend({initialize:function(i){this.get("particle").on("change",function(){this.trigger("change")},this),this.children=new Exobrain.NodeList},x:function(){return this.get("particle").position.x},y:function(){return this.get("particle").position.y},size:function(){return this.get("size")},particle:function(){return this.get("particle")},createChild:function(){var i=.4,t=this.x()+50*Math.random()-25,n=this.y()+50*Math.random()-25,e=0,r=Exobrain.makeParticle(i,t,n,e),a=new Exobrain.Node({particle:r,size:10});this.children.add(a);var o=.02,h=.1,c=120;return Exobrain.makeSpring(this.particle(),a.particle(),o,h,c),this.trigger("child",a),a.on("child",this.link,this),a.on("child",function(i){this.trigger("child",i)},this),a},link:function(i,t){if(i!==this){t=void 0===t?-100:2*t;var n=5;Exobrain.makeAttraction(this.particle(),i.particle(),t,n),this.children.each(function(n){n.link(i,t)},this)}}});Exobrain.NodeList=i.Collection.extend({model:e,initialize:function(i,t){this.on("add",this.linkNodes,this)},linkNodes:function(i){this.each(function(t){t.link(i)},this)}})});