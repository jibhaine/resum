"use strict";var $=require("jquery"),Backbone=require("backbone");Backbone.$=$,module.exports=Backbone.View.extend({el:"body#resum",initialize:function(){this.template=_.template($("#example").html(),{users:this.collection}),this.collection.on("add remove",this.render,this),$("#myModal").on("hidden",function(){$("form#createUser input").val(""),$(".errors").empty()})},events:{"mouseenter tr":"showRemoveOption","mouseleave tr":"hideRemoveOption","click .icon-remove":"removeUser","click #create":"addUser"},render:function(){return this.template=_.template($("#example").html(),{users:this.collection}),this.$el.find("#model tbody").html(this.template),this},addUser:function(){var e=new UserModel;e.set({firstname:$("#firstname").val(),lastname:$("#lastname").val(),email:$("#email").val(),phone:$("#phone").val()},{error:function(e,t){$(".errors").text(t.error),$("#"+t.field).focus()}}),e.isValid()&&(this.collection.add(e),$("#myModal").modal("hide"))},removeUser:function(e){var t=$(e.currentTarget).closest("tr").attr("data-id");this.collection.remove(this.collection.at(t))},showRemoveOption:function(e){$(e.currentTarget).find(".icon-remove").show()},hideRemoveOption:function(e){$(e.currentTarget).find(".icon-remove").hide()}});